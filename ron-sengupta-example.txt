# Create an OSEv3 group that contains the masters and nodes groups
[OSEv3:children]
masters
etcd
nodes

# Set variables common for all OSEv3 hosts
[OSEv3:vars]
# SSH user, this user should allow ssh based auth without requiring a
# password. If using ssh key based auth, then the key should be managed by an
# ssh agent.
ansible_ssh_user=rhocp

# If ansible_ssh_user is not root, ansible_become must be set to true and the
# user must be configured for passwordless sudo
ansible_become=true

# Redeploy ca certificates
#openshift_certificates_redeploy_ca=true

# Specify the deployment type. Valid values are origin and openshift-enterprise.
deployment_type=openshift-enterprise
openshift_release=v3.5

openshift_portal_net=172.30.0.0/16
osm_cluster_network_cidr=10.128.0.0/14

# Configure master API and console ports.
openshift_master_api_port=443
openshift_master_console_port=443

# Native high availability cluster method with optional load balancer.
# If no lb group is defined, the installer assumes that a load balancer has
# been preconfigured. For installation the value of
# openshift_master_cluster_hostname must resolve to the load balancer
# or to one or all of the masters defined in the inventory if no load
# balancer is present.
openshift_master_cluster_method=native
openshift_master_cluster_hostname=stg-bly-ocp-self.genworth.net
openshift_master_cluster_public_hostname=stg-bly-ocp.genworth.net

openshift_master_default_subdomain=stg-bly-ocpapps.genworth.net

# Configure custom named certificates
# NOTE: openshift_master_named_certificates is cached on masters and is an
# additive fact, meaning that each run with a different set of certificates
# will add the newly provided certificates to the cached set of certificates.
#
# An optional CA may be specified for each named certificate. CAs will
# be added to the OpenShift CA bundle which allows for the named
# certificate to be served for internal cluster communication.
#
# If you would like openshift_master_named_certificates to be overwritten with
# the provided value, specify openshift_master_overwrite_named_certificates.
openshift_master_overwrite_named_certificates=true

openshift_master_named_certificates=[{"certfile": "/home/rhocp/ocp-pilot/non-prod-bly/certs/wildcard-genworth.net-digicert.crt", "keyfile": "/home/rhocp/ocp-pilot/non-prod-bly/certs/wildcard-genworth.net-digicert.key", "names": ["stg-bly-ocp.genworth.net"], "cafile": "/home/rhocp/ocp-pilot/non-prod-bly/certs/DigiCert-SHA2-Secure-Server-CA.crt"}]

openshift_install_examples=true

# ldap auth
openshift_master_identity_providers=[{'name': 'genworth_ad', 'challenge': 'true', 'login': 'true', 'kind': 'LDAPPasswordIdentityProvider', 'attributes': {'id': ['sAMAccountName'], 'email': ['mail'], 'name': ['genworthKnownAs']}, 'bindDN': 'CN=$HQeOpsInventory,OU=Service Accounts,OU=HQ,OU=DataCenter,OU=Genworth,DC=genworth,DC=net', 'bindPassword': 'SPrYKm45bqHzre56ZPEc9RaNnVpHFf', 'insecure': 'true', 'url': 'ldap://ldap-ad-cluster-us.genworth.net/dc=genworth,dc=net?sAMAccountName?sub?(memberOf=CN=GNW-ocp-access,OU=Groups,OU=Genworth,DC=genworth,DC=net)'}]

# Registry configuration
openshift_hosted_registry_storage_kind=nfs
openshift_hosted_registry_storage_access_modes=['ReadWriteMany']
openshift_hosted_registry_storage_host=sp0045ably-nas
openshift_hosted_registry_storage_nfs_directory=/USLI_registry_nonprod_01
openshift_hosted_registry_storage_volume_name=registry
openshift_hosted_registry_storage_volume_size=100Gi

openshift_docker_additional_registries=registry.access.redhat.com
#openshift_docker_insecure_registries=
openshift_docker_blocked_registries=docker.io

# Configure the multi-tenant SDN plugin (default is 'redhat/openshift-ovs-subnet')
os_sdn_network_plugin_name='redhat/openshift-ovs-multitenant'

# default project node selector
osm_default_node_selector='region=primary'

# Configure node kubelet arguments. pods-per-core is valid in OpenShift Origin 1.3 or OpenShift Container Platform 3.3 and later.
openshift_node_kubelet_args={'pods-per-core': ['20'], 'max-pods': ['250']}

# Registry selector (optional)
# Registry will only be created if nodes matching this label are present.
# Default value: 'region=infra'
openshift_hosted_registry_selector='region=infra'

openshift_hosted_router_certificate={"certfile": "/home/rhocp/ocp-pilot/non-prod-bly/certs/stg-bly-ocpapps.genworth.net-wildcard.crt", "keyfile": "/home/rhocp/ocp-pilot/non-prod-bly/certs/stg-bly-ocpapps.genworth.net-wildcard.key", "cafile": "/home/rhocp/ocp-pilot/non-prod-bly/certs/cp0002alyn.crt"}

# Logging deployment

# Set to true to install logging. Set to false to uninstall logging.
openshift_logging_install_logging=true 

# Image version to pull down - i.e using v3.5 will pull down registry.access.redhat.com/openshift3/logging-fluentd:v3.5.
openshift_logging_image_version=v3.5

# Size of the persistent volume claim to create per ElasticSearch instance. For example, 100G. If omitted, no PVCs are created and ephemeral volumes are used instead.
openshift_logging_es_pvc_size=100Gi
openshift_logging_es_pv_selector='app=logging'
# Configure loggingPublicURL in the master config for aggregate logging, defaults
# to https://kibana.{{ openshift_master_default_subdomain }}
openshift_master_logging_public_url=https://log.stg-bly-ocpapps.genworth.net

# Configure the number of elastic search nodes, unless you're using dynamic provisioning
# this value must be 1
openshift_logging_es_cluster_size=3
openshift_hosted_logging_hostname=log.stg-bly-ocpapps.genworth.net

# The URL for the Kubernetes master, this does not need to be public facing but should be accessible from within the cluster.
openshift_logging_master_url=https://stg-bly-ocp-self.genworth.net

# The public facing URL for the Kubernetes master. This is used for Authentication redirection by the Kibana proxy.
openshift_logging_public_master_url=https://stg-bly-ocp.genworth.net

# Node selector for logging pods
openshift_hosted_logging_elasticsearch_nodeselector='region=infra'
openshift_hosted_logging_kibana_nodeselector='region=infra'
openshift_hosted_logging_curator_nodeselector='region=infra'

# Metrics deployment
openshift_metrics_install_metrics=true
openshift_metrics_image_version=v3.5
openshift_metrics_hawkular_hostname=hawkular-metrics.sandbox-ocpapps.genworth.net 
openshift_metrics_cassandra_storage_type=pv
openshift_metrics_cassandra_cpvc_size=100Gi

[masters]
US0001ABLI.genworth.net
US0001BBLI.genworth.net
US0001CBLI.genworth.net

[etcd]
US0001ABLI.genworth.net
US0001BBLI.genworth.net
US0001CBLI.genworth.net

[nodes]
US0001ABLI.genworth.net openshift_node_labels="{'region': 'master'}"
US0001BBLI.genworth.net openshift_node_labels="{'region': 'master'}"
US0001CBLI.genworth.net openshift_node_labels="{'region': 'master'}"
US0002ABLI.genworth.net openshift_node_labels="{'region': 'infra'}"
US0002BBLI.genworth.net openshift_node_labels="{'region': 'infra'}"
US0002CBLI.genworth.net openshift_node_labels="{'region': 'infra'}"
AS0001ABLI.genworth.net openshift_node_labels="{'region': 'primary'}"
AS0001BBLI.genworth.net openshift_node_labels="{'region': 'primary'}"